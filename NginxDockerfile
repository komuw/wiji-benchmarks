FROM nginx

# nginx auth docs: http://nginx.org/en/docs/http/ngx_http_auth_basic_module.html

RUN rm -rf /etc/nginx/.htpasswd

# dynamically create password
RUN UUUU="admin:" && \
    PPPP=$(date +%s | sha256sum | base64 | head -c 43) && \
    TOTAL="$UUUU$PPPP" && \
    echo $TOTAL > /etc/nginx/.htpasswd

RUN cat /etc/nginx/.htpasswd

COPY ./nginx.conf /etc/nginx/nginx.conf
